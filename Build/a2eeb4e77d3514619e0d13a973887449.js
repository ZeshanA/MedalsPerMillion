!function(t){t.fn.stupidtable=function(s){return this.each(function(){var a=t(this);s=s||{},s=t.extend({},t.fn.stupidtable.default_sort_fns,s),a.data("sortFns",s),a.on("click.stupidtable","thead th",function(){t(this).stupidsort()})})},t.fn.stupidsort=function(s){var a=t(this),e=0,n=t.fn.stupidtable.dir,i=a.closest("table"),o=a.data("sort")||null;if(null!==o){a.parents("tr").find("th").slice(0,t(this).index()).each(function(){var s=t(this).attr("colspan")||1;e+=parseInt(s,10)});var r;return 1==arguments.length?r=s:(r=s||a.data("sort-default")||n.ASC,a.data("sort-dir")&&(r=a.data("sort-dir")===n.ASC?n.DESC:n.ASC)),i.trigger("beforetablesort",{column:e,direction:r}),i.css("display"),setTimeout(function(){var s=[],d=i.data("sortFns")[o],l=i.children("tbody").children("tr");l.each(function(a,n){var i=t(n).children().eq(e),o=i.data("sort-value");"undefined"==typeof o&&(o=i.text(),i.data("sort-value",o)),s.push([o,n])}),s.sort(function(t,s){return d(t[0],s[0])}),r!=n.ASC&&s.reverse(),l=t.map(s,function(t){return t[1]}),i.children("tbody").append(l),i.find("th").data("sort-dir",null).removeClass("sorting-desc sorting-asc"),a.data("sort-dir",r).addClass("sorting-"+r),i.trigger("aftertablesort",{column:e,direction:r}),i.css("display")},10),a}},t.fn.updateSortVal=function(s){var a=t(this);return a.is("[data-sort-value]")&&a.attr("data-sort-value",s),a.data("sort-value",s),a},t.fn.stupidtable.dir={ASC:"asc",DESC:"desc"},t.fn.stupidtable.default_sort_fns={"int":function(t,s){return parseInt(t,10)-parseInt(s,10)},"float":function(t,s){return parseFloat(t)-parseFloat(s)},string:function(t,s){return t.localeCompare(s)},"string-ins":function(t,s){return t=t.toLocaleLowerCase(),s=s.toLocaleLowerCase(),t.localeCompare(s)}}}(jQuery),function(t){t(document).ready(function(){var s={},a=t("#table"),e=t("#fixedHeaderWrap"),n=function(s){var e=t('<tr class="row"></tr>').hide().appendTo(a.find("tbody"));t('<td class="country"><div class="flag '+s.code+'"></div><span class="country name">'+s.country+"</span></td>").appendTo(e),t('<td class="gold">'+s.gold+"</td>").appendTo(e),t('<td class="silver">'+s.silver+"</td>").appendTo(e),t('<td class="bronze">'+s.bronze+"</td>").appendTo(e),t('<td class="total">'+s.total+"</td>").appendTo(e),t('<td class="stat">'+(s.total/(s.population/1e6)).toFixed(4)+"</td>").appendTo(e)},i=function(s){s.stupidtable(),s.find("th.stat").stupidsort("desc"),s.bind("aftertablesort",function(){t(".row").show(500),t(".loading").hide("slow")})};t.getJSON("/data/olympic.json",function(o){s=o,t.ajax({url:"https://restcountries.eu/rest/v1/all",dataType:"json",type:"GET",error:function(t,s,a){console.log(t),console.log(s),console.log(a)},success:function(o){for(var r,d=0;d<s.length;d++){r=s[d].country;for(var l=0;l<o.length;l++)if(o[l].name===r){s[d].code=o[l].alpha2Code,s[d].population=o[l].population,n(s[d]);break}d===s.length-1&&(i(a),a.clone().attr("id","fixedHeader").appendTo(e),e.height(e.find("thead").outerHeight()+2).find("th").click(function(){var s=t(this);classes=s.attr("class").split(" "),s.hasClass("medal")?a.find("th."+classes[1]).stupidsort():a.find("th."+classes[0]).stupidsort()}))}}})}),t(window).scroll(function(){scrollY>=a.offset().top&&"hidden"===e.css("visibility")?(e.css("visibility","visible"),a.find("thead").css("visibility","hidden")):scrollY<a.offset().top&&"visible"===e.css("visibility")&&(e.css("visibility","hidden"),a.find("thead").css("visibility","visible"))})})}(jQuery);
;